<!DOCTYPE html>
<html lang="en">
<head>
    <title>Client Home Page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="main.css">
    <style>
        /* CSS to make the policy images a fixed size */
        .policy-image {
            width: 400px; /* Set the desired width */
            height: 200px; /* Set the desired height */
            object-fit: cover; /* Maintain aspect ratio and cover the area */
        }
    
        /* CSS to create gaps between policy rows */
        .policy-row {
            margin-bottom: 20px; /* Adjust the margin value to set the desired gap size */
        }
    
        /* CSS to make all col-md-4 elements the same height */
        .policy-cards {
            display: flex;
            flex-wrap: wrap;
            height: 400
        }
    
        .tile {
            display: flex;
            flex-direction: column;
        }
    
        .block {
            flex: 1;
        }
    </style>
   
</head>
<script>
    function viewSolutions(policyName) {
        window.location.href = `/All_solutions?policyName=${encodeURIComponent(policyName)}`;
    }
</script>

    
<body>
    <nav class="navbar navbar-expand-md">
        <a class="navbar-brand" href="#">
            <img src="images/footerLogoWhite.png" title="title" alt="additional title" />
        </a>
        <button class="navbar-toggler navbar-dark" type="button" data-toggle="collapse" data-target="#main-navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="main-navigation">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/client_home">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contact_info">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/upload">Upload Solution</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/user_solutions">My Solutions</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/">Logout</a>
                </li>
            </ul>
        </div>
    </nav>
    <br>
    <br>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="catalog.css">

    <!-- Start of Policy Catalog -->
    <div class="container" style="background-color: white;">
        <br>
        <div class="row policy-row">
            <% policies.forEach((policy, index) => { %>
                <div class="col-md-4">
                    <div class="shop-default shop-cards shop-tech">
                        <div class="block product no-border z-depth-2-top z-depth-2--hover">
                            <div class="block-image">
                                <a href="#">
                                    <img src= "images/policies/<%=policy.policy_name%>.png" class="img-center policy-image">
                                </a>
                            </div>
                            <div class="block-body text-center">
                                <h3 class="heading heading-5 strong-600 text-capitalize">
                                    <a href="#">
                                        <%=policy.policy_name%>  
                                    </a>
                                </h3>
                                <p class="product-description">
                                    <%=policy.policy_decription%>  
                                </p>
                                <div class="product-buttons mt-4">
                                    <div class="row align-items-center">
                                        <div class="col-2">
                                            <button type="button" class="btn-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="Favorite">
                                                <i class="fa fa-heart"></i>
                                            </button>
                                        </div>
                                        <div class="col-2">
                                            <button type="button" class="btn-icon" data-toggle="modal" data-target="#exampleModal" data-placement="top" title="" data-original-title="Compare">
                                                <i class="fa fa-share"></i>
                                            </button>
                                        </div>
                                        <div class="col-8">
                                            <button type="button" class="btn btn-block btn-primary btn-circle btn-icon-left" onclick="viewSolutions('<%=policy.policy_name%>')">
                                                <i class="fa fa-code-fork"></i> View Solution(s)
                                            </button>
                                        </div>
                                        <!-- Beginning of Modal -->
                                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">Show a co-worker this solution!</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <!-- The text field -->
                                                        <input type="text" value= "Click the 'Copy Url' button" id="myInput">
                                                        <!-- The button used to copy the text -->
                                                        <button onclick="myFunction()">Copy url</button>
                                                        <script>
                                                            function myFunction() {
                                                                // Get the text field
                                                                var copyText = document.getElementById("myInput");

                                                                // Select the text field
                                                                copyText.select();
                                                                copyText.setSelectionRange(0, 99999); // For mobile devices

                                                                // Copy the text inside the text field
                                                                // navigator.clipboard.writeText(copyText.value);
                                                                navigator.clipboard.writeText(window.location.href);

                                                                // Alert the copied text
                                                                alert("Copied url: " + window.location.href);
                                                            }
                                                        </script>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End of modal -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <% if (policies.policy) { %>
                    <h2>I have a solution</h2>
                    <script>
                       var soln_name = '<%=policy.policy_name%>%>'           
                    </script>
               <% } %>
                <% if ((index + 1) % 3 === 0) { %>
                    </div><div class="row policy-row">
                <% } %>
            <% }); %>
        </div>
    </div>
   
    <!-- End Of Policy Catalog -->

    <footer class="page-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-8 col-sm-12">
                    <h6 class="text-uppercase font-weight-bold">Additional Information</h6>
                    <p> Sanlam Limited is the licensed controlling company of the Sanlam Limited Insurance Group. Sanlam Life Insurance Limited is a licensed life insurer, authorised financial services provider and a registered credit provider (NCRCP43).</p>
                    <p> All rights reserved.</p>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-12" id="contact_info">
                    <h6 class="text-uppercase font-weight-bold">Contact</h6>
                    <p>Sanlam Head Office 2 Strand Road Bellville, 
                        <br/>South Africa Postal: PO Box 1 Sanlamhof, 7532 
                        <br/>GPS coordinates: 33"45'09.77S 18"38'28.32E
                        <br/>webmaster@sanlam.co.za
                        <br/>Tel: +27 21 947 3359
                    </p>
                </div>
            </div>
        </div>
        <div class="footer-copyright text-center">© 2023 Copyright: Obsidian Fairies</div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="main.js"></script>
</body>
</html>
